<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>LightSpeed Chat</title>

<style>
body {
  background: #0b0b0f;
  font-family: system-ui;
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.chat {
  width: 380px;
  height: 520px;
  background: #14141c;
  border-radius: 14px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.messages {
  flex: 1;
  padding: 14px;
  overflow-y: auto;
}

.msg {
  max-width: 75%;
  padding: 10px 14px;
  border-radius: 14px;
  margin-bottom: 10px;
  animation: fly 0.25s ease-out;
}

.me {
  background: #3b82f6;
  margin-left: auto;
}

.other {
  background: #2a2a38;
}

@keyframes fly {
  from {
    transform: translateX(60px) scale(0.7);
    opacity: 0;
  }
  to {
    transform: translateX(0) scale(1);
    opacity: 1;
  }
}

.input {
  display: flex;
  border-top: 1px solid #222;
}

input {
  flex: 1;
  padding: 14px;
  border: none;
  outline: none;
  background: transparent;
  color: white;
}

button {
  padding: 14px 18px;
  background: #3b82f6;
  border: none;
  color: white;
  cursor: pointer;
}
</style>
</head>

<body>
<div class="chat">
  <div class="messages" id="messages"></div>

  <div class="input">
    <input id="text" placeholder="Type at light speedâ€¦" />
    <button onclick="send()">Send</button>
  </div>
</div>

<script>
const ws = new WebSocket("ws://localhost:8080");
const messages = document.getElementById("messages");
const input = document.getElementById("text");

const id = Math.random().toString(36).slice(2);

ws.onmessage = e => {
  const data = JSON.parse(e.data);
  addMessage(data.text, data.id === id);
};

function send() {
  if (!input.value) return;

  ws.send(JSON.stringify({
    id,
    text: input.value
  }));

  input.value = "";
}

function addMessage(text, mine) {
  const div = document.createElement("div");
  div.className = "msg " + (mine ? "me" : "other");
  div.textContent = text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

input.addEventListener("keydown", e => {
  if (e.key === "Enter") send();
});
</script>
</body>
</html>
